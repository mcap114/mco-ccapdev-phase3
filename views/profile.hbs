<!-- container for the header -->
<div class="parent-header">
    {{#if isLoggedIn}}
        {{> headerUser}}
    {{else}}
        {{> headerNonUser}}
    {{/if}}
</div>

<!-- container for the content -->
<div class="parent-content-profile">

    <!-- container for the profile information -->
    <div class="parent-row blockb">
        <div class="box-parent">
            <div class="box-item-profile">
                <img src="{{user-data.user_icon}}">
                <div>
                    <b>{{user-data.name}}</b><br>
                    <span class="bio-text">@{{user-data.username}}</span><br>
                    {{#if user-data.bio}}
                        <span class="bio-text">{{user-data.bio}}</span><br>
                    {{/if}}

                    <div class="profile-stats">
                        <a  id="reviews-count" onclick="showListReview()">{{user-data.createdreview.length}} reviews</a>
                        <a  id="followers-count" onclick="showFollowers()">{{user-data.followers.length}} followers</a>
                        <a  id="following-count" onclick="showFollowing()">{{user-data.following.length}} following</a> 
                    </div> 
                    <div id="follow-btn-container">
                        {{#isFollowingUser user-data.loggedInUser user-data.username}}
                            <button id="follow-btn" onclick="toggleFollow('{{user-data.username}}')">Unfollow</button>
                        {{else}}
                            <button id="follow-btn" onclick="toggleFollow('{{user-data.username}}')">Follow</button>
                        {{/isFollowingUser}}
                    </div>

                </div>
            </div>
        </div>
        
    </div>

    <div class="widget-container" id="followers-widget">
        <span class="close-btn" onclick="hideFollowers()">x</span>
        <div class="followers-title">Followers</div>
        {{#each user.followers}}
        <div class="follower">
            <!--<img class="follower-avatar" src="{{../currentUserIcon}}" alt="Follower Avatar">-->
            <a onclick="redirectToProfile('{{this}}')">@{{this}}</a>
        </div>
        {{/each}}
    </div>

    <div class="widget-container" id="following-widget">
        <span class="close-btn" onclick="hideFollowing()">x</span>
        <div class="following-title">Following</div>
        {{#each user.following}}
        <div class="following">
            <!--<img class="following-avatar" src="{{../currentUserIcon}}" alt="Following Avatar">-->
            <a onclick="redirectToProfile('{{this}}')">@{{this}}</a>
        </div>
        {{/each}}
    </div>

    <!-- container for the user's reviews -->
    <div class="blockc">
        <!-- favorite Places -->
        <div class="main-area-titles">
            FAVORITE PLACES
            <a href="#" class="see-all"></a>
        </div>
                
        <div class="horizontal-line"></div>

        <!-- Sample Favorite Places -->
            <div class="favorite-places widget" data-widget-id="1">
        {{#each establishment-data}}    
            <div class="favorite-place">
                <img src="{{banner_image}}" alt="Favorite Place">
                <div class="profpage-widget-details">
                    <span onclick="redirectToEstablishment('{{establishment_name}}')" class="fav-place-name">{{establishment_name}}</span>
                </div>
                
            </div>
        {{/each}}
        </div>

        
    
        <!-- Created Coffee Shop Reviews -->
        <div class="main-area-titles">
            CREATED REVIEWS
            <a href="#" class="see-all"></a>
        </div>
                
        <div class="horizontal-line"></div>

        <!-- Sample Coffee Shop Review -->
        <div class="coffee-shop-reviews widget" data-widget-id="2">
            {{#each review-data}}
            <div class="coffee-shop-review">
                <img src="{{review_photo}}" alt="Coffee Shop Review">
                <div class="profpage-widget-details">
                    <span onclick="redirectToEstablishment('{{place_name}}')" class="createdrev-place-name">{{place_name}}</span>
                </div>
            </div>
            {{/each}}
            
                
        </div>
    </div>
</div>

<!-- container for the footer -->
<div class="parent-footer">
    {{> footer}}
</div>